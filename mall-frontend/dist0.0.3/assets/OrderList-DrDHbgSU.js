import{d as w,u as z,r as b,c as O,o as A,H as D,a as r,b as t,f as i,g as _,h as c,F as k,l as C,p as E,n as F,t as d,j as p,A as $,q as R,s as a,_ as U}from"./index-Cs2oV9HB.js";const j={class:"order-list-page"},H={class:"site-header"},M={class:"container header-content"},P={class:"user-area"},Q={class:"container main-box"},G={class:"filter-box"},J={key:0,class:"order-list"},K={class:"order-header"},W={class:"info"},X={class:"date"},Y={class:"no"},Z={class:"amount"},ss={class:"val"},es={class:"order-body"},ts={class:"goods-col"},os=["src","title"],ns={class:"goods-info"},as={class:"name"},ls={class:"price"},rs={class:"action-col"},is={key:1,class:"empty-box"},h="/imgs/default.webp",ds=w({__name:"OrderList",setup(us){const f=z(),I=R(),g=D(),m=b([]),u=b("all"),N=O(()=>u.value==="all"?"您还没有订单":"暂无该状态的订单"),v=async e=>{if(!f.userInfo.userId)return;let s=`/order/list?userId=${f.userInfo.userId}`;e&&e!=="all"&&(s+=`&status=${e}`);try{const n=await E.get(s);m.value=n}catch(n){console.error(n)}},S=e=>{v(e),I.replace({query:{...g.query,status:e==="all"?void 0:e}})},x=e=>({0:"待付款",1:"待发货",2:"已发货",3:"已完成"})[e]||"未知",T=e=>e===0?"text-danger":e===1?"text-success":"text-info",q=e=>e?e.replace("T"," ").substring(0,16):"",V=e=>{e.target.src=h};return A(()=>{const e=g.query.status;e?(u.value=e,v(e)):v()}),(e,s)=>{const n=c("el-tab-pane"),B=c("el-tabs"),y=c("el-button"),L=c("el-empty");return a(),r("div",j,[t("div",H,[t("div",M,[t("h2",{class:"logo",onClick:s[0]||(s[0]=o=>e.$router.push("/"))},"大米商城"),s[5]||(s[5]=t("div",{class:"divider"},"|",-1)),s[6]||(s[6]=t("div",{class:"header-title"},"我的订单",-1)),t("div",P,[t("span",{class:"link",onClick:s[1]||(s[1]=o=>e.$router.push("/user"))},"个人中心"),s[4]||(s[4]=t("span",{class:"sep"},"|",-1)),t("span",{class:"link",onClick:s[2]||(s[2]=o=>e.$router.push("/"))},"返回首页")])])]),t("div",Q,[t("div",G,[i(B,{modelValue:u.value,"onUpdate:modelValue":s[3]||(s[3]=o=>u.value=o),onTabChange:S},{default:_(()=>[i(n,{label:"全部有效订单",name:"all"}),i(n,{label:"待付款",name:"0"}),i(n,{label:"待发货",name:"1"}),i(n,{label:"已发货",name:"2"}),i(n,{label:"已完成",name:"3"})]),_:1},8,["modelValue"])]),m.value.length>0?(a(),r("div",J,[(a(!0),r(k,null,C(m.value,o=>(a(),r("div",{class:"order-item",key:o.orderId},[t("div",K,[t("div",W,[t("span",{class:F(["status",T(o.orderStatus)])},d(x(o.orderStatus)),3),s[7]||(s[7]=t("span",{class:"sep"},"|",-1)),t("span",X,d(q(o.createTime)),1),s[8]||(s[8]=t("span",{class:"sep"},"|",-1)),t("span",Y,"订单号："+d(o.orderNo),1)]),t("div",Z,[s[9]||(s[9]=p(" 应付金额：",-1)),t("span",ss,d(o.totalAmount),1),s[10]||(s[10]=p("元 ",-1))])]),t("div",es,[t("div",ts,[(a(!0),r(k,null,C(o.orderItems,l=>(a(),r("div",{class:"goods-img-item",key:l.itemId},[t("img",{src:l.skuImage||h,onError:V,title:l.skuName},null,40,os),t("div",ns,[t("div",as,d(l.skuName),1),t("div",ls,d(l.currentPrice)+"元 × "+d(l.itemQuantity),1)])]))),128))]),t("div",rs,[o.orderStatus===0?(a(),$(y,{key:0,type:"primary",size:"small",class:"btn-pay",onClick:l=>e.$router.push(`/pay?orderNo=${o.orderNo}`)},{default:_(()=>[...s[11]||(s[11]=[p(" 立即付款 ",-1)])]),_:1},8,["onClick"])):(a(),$(y,{key:1,size:"small",plain:"",onClick:l=>e.$router.push(`/order/detail?orderNo=${o.orderNo}`)},{default:_(()=>[...s[12]||(s[12]=[p(" 订单详情 ",-1)])]),_:1},8,["onClick"]))])])]))),128))])):(a(),r("div",is,[i(L,{description:N.value},null,8,["description"])]))])])}}}),ps=U(ds,[["__scopeId","data-v-94da2b36"]]);export{ps as default};
