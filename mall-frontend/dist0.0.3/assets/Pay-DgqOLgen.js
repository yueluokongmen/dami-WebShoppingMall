import{d as N,r as p,o as b,a as e,b as o,f as i,g as x,h as v,t as _,j as r,H as $,G as y,q as C,p as f,i as q,L as w,s as t,_ as B}from"./index-Cs2oV9HB.js";const P={class:"pay-page"},V={class:"site-header"},E={class:"container header-content"},I={class:"container"},M={key:0,class:"pay-box"},R={class:"section-alert"},j={class:"text-info"},A={class:"order-no"},D={class:"price-info"},G={class:"total"},H={class:"section-payment"},L={class:"payment-options"},O={class:"qr-placeholder wechat-bg"},S={key:0},T={key:1},z={class:"qr-placeholder alipay-bg"},F={key:0},J={key:1},K={key:1,class:"container loading-box"},Q=N({__name:"Pay",setup(U){const m=$(),d=C(),l=p({}),a=p(!1),k=async()=>{const n=m.query.orderNo;if(!n){y.error("订单号不存在"),d.push("/");return}try{const s=await f.get(`/order/detail?orderNo=${n}`);l.value=s}catch(s){console.error(s)}},c=async n=>{if(!a.value){a.value=!0;try{await f.post(`/order/pay?orderNo=${l.value.orderNo}`),y.success(`${n}支付成功！`),d.push("/order/list")}catch(s){console.error(s)}finally{a.value=!1}}};return b(()=>{k()}),(n,s)=>{const g=v("el-icon"),h=v("el-skeleton");return t(),e("div",P,[o("div",V,[o("div",E,[o("h2",{class:"logo",onClick:s[0]||(s[0]=u=>n.$router.push("/"))},"大米商城"),s[3]||(s[3]=o("div",{class:"divider"},"|",-1)),s[4]||(s[4]=o("div",{class:"header-title"},"支付订单",-1))])]),o("div",I,[l.value.orderNo?(t(),e("div",M,[o("div",R,[i(g,{class:"icon-success"},{default:x(()=>[i(q(w))]),_:1}),o("div",j,[s[5]||(s[5]=o("h3",null,"订单提交成功！去付款咯～",-1)),s[6]||(s[6]=o("p",{class:"sub-text"},"请在 30 分钟内完成支付，超时后将取消订单",-1)),o("p",A,"订单号："+_(l.value.orderNo),1)]),o("div",D,[s[7]||(s[7]=r(" 应付金额：",-1)),o("span",G,_(l.value.totalAmount),1),s[8]||(s[8]=r("元 ",-1))])]),o("div",H,[s[13]||(s[13]=o("h3",null,"选择以下支付方式付款",-1)),o("div",L,[o("div",{class:"pay-item",onClick:s[1]||(s[1]=u=>c("微信"))},[o("div",O,[a.value?(t(),e("div",S,"支付中...")):(t(),e("div",T,[...s[9]||(s[9]=[r(" 微信扫码",-1),o("br",null,null,-1),o("span",{class:"tip"},"(点击模拟支付)",-1)])]))]),s[10]||(s[10]=o("p",null,"微信支付",-1))]),o("div",{class:"pay-item",onClick:s[2]||(s[2]=u=>c("支付宝"))},[o("div",z,[a.value?(t(),e("div",F,"支付中...")):(t(),e("div",J,[...s[11]||(s[11]=[r(" 支付宝扫码",-1),o("br",null,null,-1),o("span",{class:"tip"},"(点击模拟支付)",-1)])]))]),s[12]||(s[12]=o("p",null,"支付宝",-1))])])])])):(t(),e("div",K,[i(h,{rows:5,animated:""})]))])])}}}),X=B(Q,[["__scopeId","data-v-51932c4e"]]);export{X as default};
