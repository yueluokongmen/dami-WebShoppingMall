import{d as N,r as p,o as b,a as e,b as o,f as i,g as x,h as v,t as _,j as r,D as $,E as y,q as C,p as f,i as q,J as w,s as t,_ as B}from"./index-DSi-hGWH.js";const E={class:"pay-page"},P={class:"site-header"},V={class:"container header-content"},D={class:"container"},I={key:0,class:"pay-box"},M={class:"section-alert"},R={class:"text-info"},j={class:"order-no"},A={class:"price-info"},J={class:"total"},O={class:"section-payment"},S={class:"payment-options"},T={class:"qr-placeholder wechat-bg"},z={key:0},F={key:1},G={class:"qr-placeholder alipay-bg"},H={key:0},K={key:1},L={key:1,class:"container loading-box"},Q=N({__name:"Pay",setup(U){const m=$(),d=C(),l=p({}),a=p(!1),k=async()=>{const n=m.query.orderNo;if(!n){y.error("订单号不存在"),d.push("/");return}try{const s=await f.get(`/order/detail?orderNo=${n}`);l.value=s}catch(s){console.error(s)}},c=async n=>{if(!a.value){a.value=!0;try{await f.post(`/order/pay?orderNo=${l.value.orderNo}`),y.success(`${n}支付成功！`),d.push("/order/list")}catch(s){console.error(s)}finally{a.value=!1}}};return b(()=>{k()}),(n,s)=>{const g=v("el-icon"),h=v("el-skeleton");return t(),e("div",E,[o("div",P,[o("div",V,[o("h2",{class:"logo",onClick:s[0]||(s[0]=u=>n.$router.push("/"))},"大米商城"),s[3]||(s[3]=o("div",{class:"divider"},"|",-1)),s[4]||(s[4]=o("div",{class:"header-title"},"支付订单",-1))])]),o("div",D,[l.value.orderNo?(t(),e("div",I,[o("div",M,[i(g,{class:"icon-success"},{default:x(()=>[i(q(w))]),_:1}),o("div",R,[s[5]||(s[5]=o("h3",null,"订单提交成功！去付款咯～",-1)),s[6]||(s[6]=o("p",{class:"sub-text"},"请在 30 分钟内完成支付，超时后将取消订单",-1)),o("p",j,"订单号："+_(l.value.orderNo),1)]),o("div",A,[s[7]||(s[7]=r(" 应付金额：",-1)),o("span",J,_(l.value.totalAmount),1),s[8]||(s[8]=r("元 ",-1))])]),o("div",O,[s[13]||(s[13]=o("h3",null,"选择以下支付方式付款",-1)),o("div",S,[o("div",{class:"pay-item",onClick:s[1]||(s[1]=u=>c("微信"))},[o("div",T,[a.value?(t(),e("div",z,"支付中...")):(t(),e("div",F,[...s[9]||(s[9]=[r(" 微信扫码",-1),o("br",null,null,-1),o("span",{class:"tip"},"(点击模拟支付)",-1)])]))]),s[10]||(s[10]=o("p",null,"微信支付",-1))]),o("div",{class:"pay-item",onClick:s[2]||(s[2]=u=>c("支付宝"))},[o("div",G,[a.value?(t(),e("div",H,"支付中...")):(t(),e("div",K,[...s[11]||(s[11]=[r(" 支付宝扫码",-1),o("br",null,null,-1),o("span",{class:"tip"},"(点击模拟支付)",-1)])]))]),s[12]||(s[12]=o("p",null,"支付宝",-1))])])])])):(t(),e("div",L,[i(h,{rows:5,animated:""})]))])])}}}),X=B(Q,[["__scopeId","data-v-51932c4e"]]);export{X as default};
