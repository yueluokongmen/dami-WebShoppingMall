import{d as h,r as p,D as T,o as ee,A as F,g as a,p as c,h as o,f as l,b as C,j as u,i as E,P,a as j,l as q,F as A,t as le,G as y,K as G,s as b,_ as ae}from"./index-Cvb7EvRk.js";const te={class:"action-bar"},oe={class:"action-bar"},ne=h({__name:"CategoryManage",setup(de){const N=p("category"),m=p([]),x=p([]),v=p(""),g=p(!1),r=T({categoryName:"",categoryIcon:""}),f=async()=>{const n=await c.get("/admin/category/list");m.value=n},K=()=>{r.categoryName="",r.categoryIcon="",g.value=!0},S=async()=>{if(!r.categoryName)return y.warning("请输入名称");await c.post("/admin/category/add",r),y.success("添加成功"),g.value=!1,f()},z=n=>{G.confirm("删除分类可能会影响该分类下的商品，确定删除吗？","警告",{type:"warning"}).then(async()=>{await c.delete(`/admin/category/delete/${n}`),y.success("删除成功"),f()})},_=p(!1),d=T({categoryId:"",productFamilyName:""}),w=async()=>{let n="/admin/product-family/list";v.value&&(n+=`?categoryId=${v.value}`);const e=await c.get(n);x.value=e},H=()=>{d.categoryId="",d.productFamilyName="",_.value=!0},J=async()=>{if(!d.categoryId||!d.productFamilyName)return y.warning("请补全信息");await c.post("/admin/product-family/add",d),y.success("添加成功"),_.value=!1,w()},O=n=>{G.confirm("确定删除该系列吗？","提示",{type:"warning"}).then(async()=>{await c.delete(`/admin/product-family/delete/${n}`),y.success("删除成功"),w()})},Q=n=>{const e=m.value.find(V=>V.categoryId===n);return e?e.categoryName:n},R=()=>{N.value==="category"?f():(m.value.length===0&&f(),w())};return ee(()=>{f()}),(n,e)=>{const V=o("el-icon"),s=o("el-button"),i=o("el-table-column"),U=o("el-table"),D=o("el-tab-pane"),$=o("el-option"),B=o("el-select"),W=o("el-tag"),X=o("el-tabs"),k=o("el-input"),I=o("el-form-item"),L=o("el-form"),M=o("el-dialog"),Y=o("el-card");return b(),F(Y,null,{header:a(()=>[...e[10]||(e[10]=[C("div",{class:"card-header"},[C("span",null,"分类与系列管理")],-1)])]),default:a(()=>[l(X,{modelValue:N.value,"onUpdate:modelValue":e[1]||(e[1]=t=>N.value=t),type:"card",onTabChange:R},{default:a(()=>[l(D,{label:"一级分类 (Category)",name:"category"},{default:a(()=>[C("div",te,[l(s,{type:"primary",onClick:K},{default:a(()=>[l(V,null,{default:a(()=>[l(E(P))]),_:1}),e[11]||(e[11]=u(" 新增分类 ",-1))]),_:1})]),l(U,{data:m.value,border:"",stripe:"",style:{width:"100%","margin-top":"20px"}},{default:a(()=>[l(i,{prop:"categoryId",label:"ID",width:"80"}),l(i,{prop:"categoryName",label:"分类名称"}),l(i,{prop:"categoryIcon",label:"图标代码"}),l(i,{label:"操作",width:"120"},{default:a(t=>[l(s,{type:"danger",link:"",onClick:Z=>z(t.row.categoryId)},{default:a(()=>[...e[12]||(e[12]=[u("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),l(D,{label:"二级系列 (Product Family)",name:"family"},{default:a(()=>[C("div",oe,[l(B,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=t=>v.value=t),placeholder:"按分类筛选",clearable:"",onChange:w,style:{"margin-right":"10px",width:"200px"}},{default:a(()=>[(b(!0),j(A,null,q(m.value,t=>(b(),F($,{key:t.categoryId,label:t.categoryName,value:t.categoryId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),l(s,{type:"primary",onClick:H},{default:a(()=>[l(V,null,{default:a(()=>[l(E(P))]),_:1}),e[13]||(e[13]=u(" 新增系列 ",-1))]),_:1})]),l(U,{data:x.value,border:"",stripe:"",style:{width:"100%","margin-top":"20px"}},{default:a(()=>[l(i,{prop:"productFamilyId",label:"ID",width:"80"}),l(i,{label:"所属分类",width:"150"},{default:a(t=>[l(W,null,{default:a(()=>[u(le(Q(t.row.categoryId)),1)]),_:2},1024)]),_:1}),l(i,{prop:"productFamilyName",label:"系列名称"}),l(i,{label:"操作",width:"120"},{default:a(t=>[l(s,{type:"danger",link:"",onClick:Z=>O(t.row.productFamilyId)},{default:a(()=>[...e[14]||(e[14]=[u("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1},8,["modelValue"]),l(M,{modelValue:g.value,"onUpdate:modelValue":e[5]||(e[5]=t=>g.value=t),title:"新增一级分类",width:"400px"},{footer:a(()=>[l(s,{onClick:e[4]||(e[4]=t=>g.value=!1)},{default:a(()=>[...e[15]||(e[15]=[u("取消",-1)])]),_:1}),l(s,{type:"primary",onClick:S},{default:a(()=>[...e[16]||(e[16]=[u("确定",-1)])]),_:1})]),default:a(()=>[l(L,{model:r},{default:a(()=>[l(I,{label:"分类名称","label-width":"80px"},{default:a(()=>[l(k,{modelValue:r.categoryName,"onUpdate:modelValue":e[2]||(e[2]=t=>r.categoryName=t),placeholder:"如: 手机"},null,8,["modelValue"])]),_:1}),l(I,{label:"图标","label-width":"80px"},{default:a(()=>[l(k,{modelValue:r.categoryIcon,"onUpdate:modelValue":e[3]||(e[3]=t=>r.categoryIcon=t),placeholder:"这里是elementUI的icon"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(M,{modelValue:_.value,"onUpdate:modelValue":e[9]||(e[9]=t=>_.value=t),title:"新增二级系列",width:"400px"},{footer:a(()=>[l(s,{onClick:e[8]||(e[8]=t=>_.value=!1)},{default:a(()=>[...e[17]||(e[17]=[u("取消",-1)])]),_:1}),l(s,{type:"primary",onClick:J},{default:a(()=>[...e[18]||(e[18]=[u("确定",-1)])]),_:1})]),default:a(()=>[l(L,{model:d},{default:a(()=>[l(I,{label:"所属分类","label-width":"80px"},{default:a(()=>[l(B,{modelValue:d.categoryId,"onUpdate:modelValue":e[6]||(e[6]=t=>d.categoryId=t),placeholder:"请选择",style:{width:"100%"}},{default:a(()=>[(b(!0),j(A,null,q(m.value,t=>(b(),F($,{key:t.categoryId,label:t.categoryName,value:t.categoryId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(I,{label:"系列名称","label-width":"80px"},{default:a(()=>[l(k,{modelValue:d.productFamilyName,"onUpdate:modelValue":e[7]||(e[7]=t=>d.productFamilyName=t),placeholder:"如: 大米14系列"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1})}}}),ue=ae(ne,[["__scopeId","data-v-01739b77"]]);export{ue as default};
